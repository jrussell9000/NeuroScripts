#!/bin/bash
# Do Tromp 2015
# tromp@wisc.edu
# Run DTI youthptsd processing pipeline

if [ $# -lt 5 ]
then
echo
echo ERROR, not enough input variables
echo
echo Run DTI youthptsd processing pipeline
echo Usage:
echo sh youthptsd_dti_processing.sh {raw_input_dir} {nifti_output_dir} {pre-existing_mask} {pepolar} {species} {subjs_separate_by_space}
echo eg:
echo sh youthptsd_dti_processing.sh /Volumes/Studies/Herringa/YouthPTSD /Volumes/Vol6/YouthPTSD/data/DTI nomask 0 hp _125/
echo
echo pr-existing_mask = mask or nomask, if pre-existing mask is available location in output_dir/MASK or not respectively
echo
echo pepolar = 0 or 1 flip phase encoding direction, 0 is used for squished, 1 is used for stretched raw DWI
echo


else
echo
echo
raw=$1
echo "Input directory: "$raw
PROCESS=$2
echo "Output directory: "$PROCESS
manual_mask=$3
echo "Pre-existing mask: "$manual_mask
pepolar=$4
echo "Pe-polar direction: "$pepolar
species=$5
echo "Species: "$species

shift 5
subject=$*

#echo ~~~Standardize~~~;
my_script=/Volumes/Vol6/YouthPTSD/scripts/njk_scripts
echo sh $my_script/standardize.sh $PROCESS $species $subj;
sh $my_script/standardize.sh $PROCESS $species $subj;
echo

#echo ~~~Make Scalars~~~;
my_script=/Volumes/Vol6/YouthPTSD/scripts/njk_scripts
echo sh $my_script/make_scalars.sh $PROCESS/TEMPLATE $PROCESS/SCALARS all $subj;
sh $my_script/make_scalars.sh $PROCESS/TEMPLATE $PROCESS/SCALARS all $subj;
echo
echo FINISHED RUNNING THIS SUBJECT - ONWARDS!
echo

